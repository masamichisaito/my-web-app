<!DOCTYPE html>
<html>
<head>
  <title>バトル</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/rpg/battle.css">
</head>
<body class="container mt-5 text-center">

  <!-- バトルログ（1行目表示） -->
  <% if (session.log) { %>
    <p class="alert alert-info"><%= session.log %></p>
  <% } %>

  <!-- キャラ表示：勇者 vs 敵 -->
  <div class="battle-field d-flex justify-content-between align-items-end mb-5">

    <!-- 敵キャラ -->
    <div class="enemy text-center">
      <h4 class="mb-2"><%= enemy.name %></h4>
      <p>HP: <%= enemy.hp %> / <%= enemy.maxHp %></p>
      <div class="progress mb-3" style="height: 20px; width: 150px; margin: auto;">
        <div class="progress-bar bg-danger" role="progressbar"
             style="width: <%= Math.max(0, (enemy.hp / enemy.maxHp) * 100) %>%"></div>
      </div>
      <img src="<%= enemy.img %>" alt="<%= enemy.name %>" class="img-fluid" style="height: 150px;">
    </div>

    <!-- 勇者キャラ -->
    <div class="hero text-center">
      <h4 class="mb-2"><%= hero.name %></h4>
      <p>HP: <%= hero.hp %> / 30</p>
      <div class="progress mb-3" style="height: 20px; width: 150px; margin: auto;">
        <div class="progress-bar bg-success" role="progressbar"
             style="width: <%= Math.max(0, (hero.hp / 30) * 100) %>%"></div>
      </div>
      <img src="/img/rpg/herobattle.png" alt="勇者" class="hero-right" style="height: 150px;">
    </div>

  </div>

  <!-- 攻撃ボタン -->
  <form action="/rpg/attack" method="post" class="mb-4">
    <button type="submit" class="btn btn-primary">攻撃！</button>
  </form>

</body>
</html>
